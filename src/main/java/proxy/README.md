# Proxy 패턴 📚 - 필요해지면 만들기

### Proxy
- 일을 해야 할 본인을 대신(대리)하는 사람. 본인이 아니더라도 가능한 일을 맡기기 위한 대리인
- 어디까지나 대리에 지나지 않기 때문에 할 수 있는 일에는 한계가 있다
---


#### 예제



--- 
### Proxy 패턴의 등장인물
- Subject(주체)의 역할
  - `Proxy`와 `ProxySubject` 역할을 동일시하기 위한 인터페이스(API)를 결정
  - `Subject` 역할 -> 예제 Printable
  - 예제 프로젝트의 Printable은 proxy와 proxysubject 역할의 차이를 의식할 필요가 없다
- Proxy(대리인)의 역할
  - Client(Main) 역할의 요구를 할 수 있는 만큼 처리
  - 만약 자신만으로 처리할 수 없으면, Proxy 역할은 RealSubject 역할에게 처리를 맡긴다
  - Subject 역할에서 정해지는 인터페이스(API)를 구현
- RealSubject(실제의 주체)의 역할
  - 대리인 Proxy 역할에서 감당할 수 없는 일이 발생했을 때 등장 -> '본인'!
  - Proxy 역할과 마찬가지로 Subject 역할에서 정해져 있는 인터페이스(API) 구현
- Client(의뢰인)의 역할
  - Proxy 패턴을 이용하는 역할
  - 예제 프로그램에서의 Main
---
# 📌 Check
---

### TIP! 대리인 Proxy
Proxy 역할이 대리인이 되어 가능한 일만 처리를 대신한다.
`example`
초기화에 시간이 걸리는 기능이 많이 존재하는 대규모 시스템이라면?
기동 시점에서는 이용하지 않는 기능까지 전부 초기화하면, **어플리케이션의 기동에 시간이 많이 걸린다**
▶ **실제로 그 기능을 사용할 단계가 되어 처음으로 초기화하는 편이 부담을 덜 수 있다**
<br>

#### 대리인과 본인을 분리한 이유
`if` PrinterProxy 클래스와 Printer 클래스로 분리하지 않고 Printer 클래스 안에 처음부터 지연평가의 기능(필요하게 되면 그때 인스턴스를 생성하는 기능)을 넣었다면?
- PrinterProxy 클래스의 구현을 바꿈으로써 Printable 인터페이스에 선언되어 있는 메소드 중에서 무엇을 대리인/본인이 처리할지 변경할 수 있다.
- 변경이 있더라도 Printer 클래스를 수정할 필요가 전혀 없다
- 지연평가를 실행시키고 싶지 않으면, Main 클래스에서 PrinterProxy 클래스를 new 하지 않고, Printer 클래스(본인)을 new하면 된다
- Main 클래스는 안심하고 PrinterProxy와 Printer를 교체해서 사용할 수 있다
<br>
  
#### 대리와 위임
대리인은 혼자 처리할 수 있는 일을 대리인이 처리하며, 처리할 수 없을 때에는 처리할 수 있는 본인에게 **위임**한다
\* 현실 세계에서는 보통 본인이 대리인에게 책임을 위임하기 때문에, 디자인 패턴에서 뜻하는 위임과는 반대이다
<br>

#### HTTP Proxy
HTTP 서버(웹 서버)와 HTTP 클라이언트(웹 브라우저) 사이에서 웹 페이지의 캐싱(cashing)을 실행하는 소프트웨어

\* **페이지의 캐싱**
웹 브라우저가 어떤 웹페이지를 표시할 때 일일이 원격지에 있는 웹 서버에 액세스해서 그 페이지를 취득하는 것도 아니고, HTTP Proxy가 캐쉬해서 어떤 페이지를 대신해서 취득
최신 정보가 필요하거나, 페이지의 유효기간이 지났을 때 웹 서버에 웹 페이지를 가지러 간다
- Client : 웹 브라우저
- Proxy : HTTP Proxy
- RealSubject : 웹 서버
<br>

#### 그 외의 다양한 Proxy 패턴
- Virtual Proxy 
  - 정말로 인스턴스가 필요한 시점에서 생성&초기화를 실행
- Remote Proxy 
  - RealSubject 역할이 네트워크 상태 쪽에 있음에도 불구하고 마치 자신의 옆에 있는 것처럼(투과적으로) 메소드 호출 가능
  - `ex` JAVA RMI(Remote Method Invocation:원격 메소드 호출)
- Access Proxy
  - RealSubject 역할의 '기능'에 대해 액세스 제한을 설정
  - 정해진 사용자 -> 호출 허가
  - 그 외 -> ERROR
